{"ast":null,"code":"var _jsxFileName = \"/home/user/Desktop/final-project-w2m/Wave2Me-DCI-FinalProject/client/src/components/Learn/Learn.jsx\",\n    _s = $RefreshSig$();\n\nimport TopUsers from './TopUsers.jsx';\nimport './Learn.css';\nimport uploadingVid from '../../assets/uploading_bar.mp4';\nimport notFound from '../../assets/404pagenotfound.mp4';\nimport updateUserData from '../../helpers/updateUserData';\nimport { useState, useRef, useEffect, useContext } from 'react';\nimport MyContext from '../../context/MyContext.js';\nimport fetchMyVideos from '../../helpers/fetchMyVideos';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nconst Learn = () => {\n  _s();\n\n  const {\n    setLandingModal,\n    justEarnedPoints,\n    setJustEarnedPoints,\n    setPointsPopup,\n    payload\n  } = useContext(MyContext);\n  const userDataID = payload.dataID;\n  const initialPositions = {\n    favorites: 90,\n    workOnIt: 93.3,\n    another: 96.6\n  };\n  const expandedPositions = {\n    favorites: 0,\n    workOnIt: 3,\n    another: 6\n  };\n  const [userData, setUserData] = useState({\n    favorites: [],\n    workOnIt: [],\n    points: 0,\n    dataID: null\n  });\n  const [modalsPosition, setModalsPosition] = useState(initialPositions);\n  const [videoData, setVideoData] = useState({\n    title: 'Loading...',\n    data: uploadingVid,\n    videoID: null\n  });\n  const [chosenVideosData, setChosenVideosData] = useState({\n    favorites: [],\n    workOnIt: []\n  });\n  const [selectSearch, setSelectSearch] = useState('');\n  const [submitted, setSubmitted] = useState(false);\n  const [isLiked, setIsLiked] = useState(false);\n  const [toWorkOnIt, setToWorkOnIt] = useState(false);\n  const [topUsersIsOpen, setTopUsersIsOpen] = useState(false);\n  const favoritesRef = useRef();\n  const workOnItRef = useRef();\n  const anotherRef = useRef();\n  const heartRef = useRef();\n  const workOnVideoRef = useRef();\n  const favVidRef = useRef();\n  const workVidRef = useRef();\n  const anotherVidRef = useRef();\n  const levelBarRef = useRef();\n  const topRef = useRef();\n  const levelName = ['NOVICE', 'BEGINNER', 'PROGRESSING BEGINNER', 'ENTERING INTERMEDIATE', 'INTERMEDIATE', 'ADVANCED', 'EXPERT', 'MASTER'];\n  useEffect(() => {\n    if (heartRef.current && userData.favorites.includes(videoData.videoID)) {\n      heartRef.current.style.color = '#7f6ea6';\n      heartRef.current.title = \"Remove like?\";\n    } else if (heartRef.current) {\n      heartRef.current.style.color = 'white';\n      heartRef.current.title = \"Add to favorites\";\n    }\n  }, [userData.favorites, videoData.videoID]);\n  useEffect(() => {\n    if (workOnVideoRef.current && userData.workOnIt.includes(videoData.videoID)) {\n      workOnVideoRef.current.style.color = '#9168a1';\n      workOnVideoRef.current.title = \"Remove icon?\";\n    } else if (workOnVideoRef.current) {\n      workOnVideoRef.current.style.color = 'white';\n      workOnVideoRef.current.title = \"Work on it later\";\n    }\n  }, [userData.workOnIt, videoData.videoID]);\n\n  const favList = () => {\n    return chosenVideosData.favorites.map((vidData, i) => /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"img-container\",\n        children: /*#__PURE__*/_jsxDEV(\"video\", {\n          src: vidData.data,\n          type: \"video/mp4\",\n          onPlay: () => addPoints(2),\n          onPause: () => addPoints(2),\n          controls: true,\n          loop: true,\n          children: \"Your browser does not support the video tag.\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 67,\n          columnNumber: 41\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 66,\n        columnNumber: 31\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"text\",\n        children: /*#__PURE__*/_jsxDEV(\"h5\", {\n          className: \"fav-title\",\n          children: vidData.title.toUpperCase()\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 78,\n          columnNumber: 33\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 77,\n        columnNumber: 31\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"fav-delete\",\n        children: [/*#__PURE__*/_jsxDEV(\"i\", {\n          className: \"fa fa-trash-o\",\n          title: \"Remove this video from favorites\",\n          onClick: e => {\n            setIsLiked(!isLiked);\n            removeVid('favorites', vidData._id);\n            fetchMyVideos(setChosenVideosData, { ...userData,\n              favorites: userData.favorites.filter(id => id !== vidData._id)\n            }, chosenVideosData, 'favorites');\n          },\n          style: {\n            cursor: 'pointer',\n            color: '#404756'\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 84,\n          columnNumber: 33\n        }, this), /*#__PURE__*/_jsxDEV(\"i\", {\n          className: \"fa fa-arrow-up\",\n          title: \"Remove this video from favorites\",\n          onClick: e => {\n            setIsLiked(!isLiked);\n            removeVid('favorites', vidData._id);\n            fetchMyVideos(setChosenVideosData, { ...userData,\n              favorites: userData.favorites.filter(id => id !== vidData._id)\n            }, chosenVideosData, 'favorites');\n          },\n          style: {\n            cursor: 'pointer',\n            color: '#404756'\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 91,\n          columnNumber: 33\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 83,\n        columnNumber: 31\n      }, this)]\n    }, 'fav_' + i, true, {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 29\n    }, this));\n  };\n\n  const workOnItList = () => {\n    return chosenVideosData.workOnIt.map((vidData, i) => /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"img-container\",\n        children: /*#__PURE__*/_jsxDEV(\"video\", {\n          src: vidData.data,\n          type: \"video/mp4\",\n          onPlay: () => addPoints(2),\n          onPause: () => addPoints(2),\n          controls: true,\n          loop: true,\n          children: \"Your browser does not support the video tag.\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 109,\n          columnNumber: 41\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 108,\n        columnNumber: 31\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"text\",\n        children: /*#__PURE__*/_jsxDEV(\"h5\", {\n          className: \"fav-title\",\n          children: vidData.title.toUpperCase()\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 120,\n          columnNumber: 33\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 119,\n        columnNumber: 31\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"fav-delete\",\n        children: [/*#__PURE__*/_jsxDEV(\"i\", {\n          className: \"fa fa-trash-o\",\n          title: \"Remove this video from workOnIt\",\n          onClick: e => {\n            removeVid('workOnIt', vidData._id);\n            fetchMyVideos(setChosenVideosData, { ...userData,\n              workOnIt: userData.workOnIt.filter(id => id !== vidData._id)\n            }, chosenVideosData, 'workOnIt');\n          },\n          style: {\n            cursor: 'pointer',\n            color: '#404756'\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 126,\n          columnNumber: 33\n        }, this), /*#__PURE__*/_jsxDEV(\"i\", {\n          className: \"fa fa-arrow-up\",\n          title: \"Remove this video from workOnIt\",\n          onClick: e => {\n            removeVid('workOnIt', vidData._id);\n            fetchMyVideos(setChosenVideosData, { ...userData,\n              workOnIt: userData.workOnIt.filter(id => id !== vidData._id)\n            }, chosenVideosData, 'workOnIt');\n          },\n          style: {\n            cursor: 'pointer',\n            color: '#404756'\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 133,\n          columnNumber: 33\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 125,\n        columnNumber: 31\n      }, this)]\n    }, 'work_' + i, true, {\n      fileName: _jsxFileName,\n      lineNumber: 106,\n      columnNumber: 29\n    }, this));\n  };\n\n  const getLevel = n => {\n    //based on Fibonacci sequence\n    if (n <= 3) {\n      return 0;\n    }\n\n    let a = 0,\n        b = 1,\n        c = 1,\n        result = -4;\n\n    while (c < n) {\n      c = a + b;\n      a = b;\n      b = c;\n      result++;\n    }\n\n    return {\n      result,\n      levelName: Math.floor(result / 5)\n    };\n  };\n\n  const addPoints = points => {\n    updateUserData({ ...userData,\n      points: userData.points + points\n    });\n    setUserData({ ...userData,\n      points: userData.points + points\n    });\n    setJustEarnedPoints(justEarnedPoints + points);\n  };\n\n  const removeVid = (property, videoID) => {\n    userData.points += 2;\n    const removeID = userData[property].filter(id => id !== videoID);\n    updateUserData({ ...userData,\n      [property]: removeID\n    }, property);\n    setUserData({ ...userData,\n      [property]: removeID\n    });\n  };\n\n  const workOnVideo = () => {\n    const property = 'workOnIt';\n\n    if (userData.dataID && videoData.videoID) {\n      if (!toWorkOnIt) {\n        userData.workOnIt.push(videoData.videoID);\n        userData.points += 2;\n        setJustEarnedPoints(justEarnedPoints + 2);\n        updateUserData(userData, property);\n        setUserData({ ...userData,\n          [property]: [...userData[property]]\n        });\n      } else {\n        removeVid(property, videoData.videoID);\n      }\n\n      setToWorkOnIt(!toWorkOnIt);\n      workOnVideoRef.current.classList.add(\"shake\");\n      setTimeout(() => {\n        (workOnVideoRef === null || workOnVideoRef === void 0 ? void 0 : workOnVideoRef.current) && workOnVideoRef.current.classList.remove(\"shake\");\n      }, 1000);\n    }\n  };\n\n  const likeVideo = () => {\n    const property = 'favorites';\n\n    if (userData.dataID && videoData.videoID) {\n      if (!isLiked) {\n        userData.favorites.push(videoData.videoID);\n        userData.points += 3;\n        setJustEarnedPoints(justEarnedPoints + 3);\n        updateUserData(userData, property);\n        setUserData({ ...userData,\n          [property]: [...userData[property]]\n        });\n      } else {\n        removeVid(property, videoData.videoID);\n      }\n\n      heartRef.current.style.top = '-4500%';\n      heartRef.current.style.transform = \"rotate(1080deg)\";\n      heartRef.current.style.opacity = '1';\n      setIsLiked(!isLiked);\n    }\n  };\n\n  useEffect(() => {\n    let resetHeart;\n\n    if (heartRef.current) {\n      resetHeart = setTimeout(() => {\n        heartRef.current.style.top = '0';\n        heartRef.current.style.transform = \"initial\";\n      }, 1000);\n    }\n\n    return () => {\n      resetHeart && clearTimeout(resetHeart);\n    };\n  }, [isLiked]);\n\n  const onChangeHandler = e => {\n    if (e.target.value) {\n      fetch('http://localhost:5000/searchVideos', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify({\n          input: e.target.value\n        })\n      }).then(res => res.json()).then(data => setSelectSearch(data)).catch(console.log);\n    }\n  };\n\n  const submitHandler = e => {\n    e.preventDefault();\n    let input = '';\n\n    switch (e.target.tagName) {\n      case 'FORM':\n        input = e.target.firstChild.firstChild.value;\n        input && setVideoData({\n          title: 'Loading...',\n          data: uploadingVid\n        });\n        break;\n\n      case 'SELECT':\n        e.target.previousSibling.firstChild.value = e.target.value;\n        return;\n\n      case 'I':\n        input = e.target.parentElement.previousSibling.value;\n        input && setVideoData({\n          title: 'Loading...',\n          data: uploadingVid\n        });\n        break;\n\n      default:\n        return;\n    }\n\n    fetch('http://localhost:5000/searchVideo', {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify({\n        input\n      })\n    }).then(res => res.json()).then(video => {\n      if (video) {\n        setVideoData({\n          title: video.title,\n          data: video.data,\n          videoID: video._id\n        });\n        setIsLiked(userData.favorites.includes(video._id));\n        setToWorkOnIt(userData.workOnIt.includes(video._id));\n        setSubmitted(true);\n      } else {\n        setVideoData({\n          title: 'Video not found.',\n          data: notFound,\n          videoID: null\n        });\n      }\n    }).catch(console.log);\n  };\n\n  useEffect(() => {\n    favoritesRef.current.style.left = modalsPosition.favorites + '%';\n    workOnItRef.current.style.left = modalsPosition.workOnIt + '%';\n    anotherRef.current.style.left = modalsPosition.another + '%';\n\n    if (modalsPosition.favorites >= 90) {\n      favoritesRef.current.style.height = '0';\n    } else {\n      favoritesRef.current.style.height = '100vh';\n    }\n\n    if (modalsPosition.workOnIt >= 90) {\n      workOnItRef.current.style.height = '0';\n    } else {\n      workOnItRef.current.style.height = '100vh';\n    }\n\n    if (modalsPosition.another >= 90) {\n      anotherRef.current.style.height = '0';\n    } else {\n      anotherRef.current.style.height = '100vh';\n    }\n  }, [modalsPosition]);\n  useEffect(() => {\n    const fetchOptions = {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json',\n        token: localStorage.getItem('W2M-JWT-Token')\n      },\n      body: JSON.stringify({\n        dataID: userDataID\n      })\n    };\n    fetch('http://localhost:5000/get-user-data', fetchOptions).then(res => res.json()).then(data => {\n      data.token_error || !localStorage.getItem('W2M-JWT-Token') ? setLandingModal(true) : data.data_error ? console.log(data) : setUserData(data);\n    }).catch(err => console.log('fetch error', err.message));\n    fetch('http://localhost:5000/video-of-the-day').then(res => res.json()).then(video => {\n      setVideoData({\n        title: video.title,\n        data: video.data,\n        videoID: video._id\n      });\n    }).catch(console.log);\n    setJustEarnedPoints(0);\n    setPointsPopup(false);\n    return () => setPointsPopup(true);\n  }, []);\n  useEffect(() => {\n    const level = getLevel(userData.points).result; //fibonacci based\n\n    let a = 0,\n        b = 1,\n        c = level + 5;\n\n    for (let i = 2; i <= level + 5; i++) {\n      c = a + b;\n      a = b;\n      b = c;\n    }\n\n    const neededForNextLevelPoints = c - a;\n    const colectedLevelPoints = userData.points - a;\n    const barPercent = colectedLevelPoints / neededForNextLevelPoints * 100;\n    if (levelBarRef.current) levelBarRef.current.style.backgroundImage = `linear-gradient(90deg, #33336C ${barPercent - 3}%, #e2f1ff ${barPercent + 3}%)`;\n  }, [userData.points]);\n\n  const resizeModal = modal_name => {\n    addPoints(2);\n\n    if (modal_name === 'favorites' && modalsPosition[modal_name] > 10) {\n      favVidRef.current.style.opacity = 1;\n      workVidRef.current.style.opacity = 0;\n      anotherVidRef.current.style.opacity = 0;\n    }\n\n    if (modal_name === 'workOnIt' && modalsPosition[modal_name] > 10) {\n      favVidRef.current.style.opacity = .4;\n      workVidRef.current.style.opacity = 1;\n      anotherVidRef.current.style.opacity = 0;\n    }\n\n    if (modal_name === 'favorites' && modalsPosition[modal_name] < 10 && modalsPosition.workOnIt > 10) {\n      favVidRef.current.style.opacity = 0;\n      workVidRef.current.style.opacity = 0;\n      anotherVidRef.current.style.opacity = 0;\n    }\n\n    if (modal_name === 'favorites' && modalsPosition[modal_name] < 10 && modalsPosition.workOnIt < 10) {\n      favVidRef.current.style.opacity = 1;\n      workVidRef.current.style.opacity = 0;\n      anotherVidRef.current.style.opacity = 0;\n    }\n\n    if (modal_name === 'workOnIt' && modalsPosition[modal_name] < 10) {\n      favVidRef.current.style.opacity = 1;\n      workVidRef.current.style.opacity = 1;\n      anotherVidRef.current.style.opacity = 0;\n    }\n\n    if (modal_name === 'another' && modalsPosition[modal_name] < 10) {\n      favVidRef.current.style.opacity = .4;\n      workVidRef.current.style.opacity = 1;\n      anotherVidRef.current.style.opacity = 0;\n    }\n\n    if (modal_name === 'another' && modalsPosition[modal_name] > 10) {\n      favVidRef.current.style.opacity = .4;\n      workVidRef.current.style.opacity = .4;\n      anotherVidRef.current.style.opacity = 1;\n    }\n\n    if (modal_name === 'search') {\n      favVidRef.current.style.opacity = 0;\n      workVidRef.current.style.opacity = 0;\n      anotherVidRef.current.style.opacity = 0;\n    }\n\n    modal_name !== 'another' && modal_name !== 'search' && (modalsPosition[modal_name] > 10 || modalsPosition.workOnIt < 10) && fetchMyVideos(setChosenVideosData, userData, chosenVideosData, modal_name);\n\n    switch (modal_name) {\n      case 'favorites':\n        modalsPosition.workOnIt > 10 ? setModalsPosition(prev => prev = modalsPosition[modal_name] < 10 ? initialPositions : { ...initialPositions,\n          [modal_name]: expandedPositions.favorites\n        }) : setModalsPosition({ ...initialPositions,\n          [modal_name]: expandedPositions.favorites\n        });\n        break;\n\n      case 'workOnIt':\n        modalsPosition.another > 10 ? setModalsPosition(prev => prev = modalsPosition[modal_name] < 10 ? { ...initialPositions,\n          'favorites': expandedPositions.favorites\n        } : { ...expandedPositions,\n          'another': initialPositions.another\n        }) : setModalsPosition({ ...expandedPositions,\n          'another': initialPositions.another\n        });\n        break;\n\n      case 'another':\n        setModalsPosition(prev => prev = modalsPosition[modal_name] < 10 ? { ...expandedPositions,\n          [modal_name]: initialPositions.another\n        } : expandedPositions);\n        break;\n\n      case 'search':\n        setModalsPosition(initialPositions);\n        break;\n\n      default:\n        return;\n    }\n  };\n\n  const resizeTopUsersModal = () => {\n    if (topRef.current) {\n      topRef.current.style.height = '80vh';\n      topRef.current.style.width = '80vw';\n      topRef.current.style.opacity = '1';\n      setTopUsersIsOpen(!topUsersIsOpen);\n    }\n  };\n\n  if (!localStorage.getItem('W2M-JWT-Token')) setLandingModal(true);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    id: \"learn-container\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      id: \"first-page\",\n      children: [/*#__PURE__*/_jsxDEV(\"form\", {\n        id: \"search-container\",\n        onSubmit: submitHandler,\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          id: \"search-div\",\n          children: [/*#__PURE__*/_jsxDEV(\"input\", {\n            onChange: onChangeHandler,\n            type: \"text\",\n            name: \"search\",\n            placeholder: \"Search sign videos here\",\n            autoFocus: true\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 432,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            id: \"search-btn\",\n            children: /*#__PURE__*/_jsxDEV(\"i\", {\n              id: \"search-vid-icon\",\n              className: \"fas fa-search\",\n              onClick: submitHandler\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 439,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 438,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 431,\n          columnNumber: 15\n        }, this), selectSearch.length > 0 && /*#__PURE__*/_jsxDEV(\"select\", {\n          style: {\n            color: 'black'\n          },\n          onChange: submitHandler,\n          children: [/*#__PURE__*/_jsxDEV(\"option\", {\n            value: \"\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 446,\n            columnNumber: 19\n          }, this), selectSearch.map((video, i) => /*#__PURE__*/_jsxDEV(\"option\", {\n            style: {\n              color: 'black'\n            },\n            value: video.title,\n            children: video.title\n          }, i, false, {\n            fileName: _jsxFileName,\n            lineNumber: 447,\n            columnNumber: 48\n          }, this))]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 445,\n          columnNumber: 41\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 430,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"text\",\n        children: /*#__PURE__*/_jsxDEV(\"h5\", {\n          children: submitted || videoData.title === 'Video not found.' ? videoData.title.toUpperCase() : 'Video of the day: ' + videoData.title.toUpperCase()\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 452,\n          columnNumber: 15\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 451,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"img-container\",\n        children: /*#__PURE__*/_jsxDEV(\"video\", {\n          src: videoData.data,\n          type: \"video/mp4\",\n          onPlay: () => addPoints(2),\n          onPause: () => addPoints(2),\n          controls: videoData.title === 'Loading...' || videoData.title === 'Video not found.' ? false : true,\n          autoPlay: true,\n          loop: true,\n          children: \"Your browser does not support the video tag.\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 458,\n          columnNumber: 23\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 457,\n        columnNumber: 13\n      }, this), videoData.videoID && /*#__PURE__*/_jsxDEV(\"div\", {\n        id: \"video-likes\",\n        children: [/*#__PURE__*/_jsxDEV(\"i\", {\n          className: \"fa fa-heart\",\n          style: {\n            position: 'relative'\n          },\n          children: /*#__PURE__*/_jsxDEV(\"i\", {\n            className: \"fa fa-heart video-icon\",\n            ref: heartRef,\n            onClick: likeVideo\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 472,\n            columnNumber: 17\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 471,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"i\", {\n          className: \"fas fa-business-time\",\n          style: {\n            position: 'relative'\n          },\n          children: /*#__PURE__*/_jsxDEV(\"i\", {\n            className: \"fas fa-business-time video-icon\",\n            ref: workOnVideoRef,\n            onClick: workOnVideo\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 475,\n            columnNumber: 17\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 474,\n          columnNumber: 15\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 470,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        id: \"level-container\",\n        title: \"Click to see Top Users\",\n        onClick: resizeTopUsersModal,\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          id: \"level-indicator\",\n          children: [\"Level: \", getLevel(userData.points).result, \" \", levelName[getLevel(userData.points).levelName]]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 479,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          id: \"level-bar\",\n          ref: levelBarRef\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 480,\n          columnNumber: 17\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 478,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(TopUsers, {\n        topRef: topRef,\n        topUsersIsOpen: topUsersIsOpen\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 483,\n        columnNumber: 13\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 429,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      id: \"favorites-modal\",\n      ref: favoritesRef,\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"dummy-margin-top\",\n        style: {\n          height: '15px',\n          cursor: 'pointer'\n        },\n        onClick: e => resizeModal('search'),\n        children: modalsPosition.workOnIt < 90 && /*#__PURE__*/_jsxDEV(_Fragment, {\n          children: [/*#__PURE__*/_jsxDEV(\"i\", {\n            className: \"fas fa-search\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 488,\n            columnNumber: 44\n          }, this), /*#__PURE__*/_jsxDEV(\"i\", {\n            className: \"fa fa-arrow-right\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 488,\n            columnNumber: 77\n          }, this)]\n        }, void 0, true)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 487,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"modal-icons\",\n        onClick: e => resizeModal('favorites'),\n        children: [modalsPosition.favorites > 10 ? /*#__PURE__*/_jsxDEV(\"i\", {\n          className: \"fa fa-arrow-left\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 492,\n          columnNumber: 13\n        }, this) : modalsPosition.workOnIt > 10 ? /*#__PURE__*/_jsxDEV(\"i\", {\n          className: \"fa fa-arrow-right\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 493,\n          columnNumber: 42\n        }, this) : /*#__PURE__*/_jsxDEV(\"span\", {\n          style: {\n            marginRight: '1%'\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 493,\n          columnNumber: 82\n        }, this), '    ', \" \", /*#__PURE__*/_jsxDEV(\"i\", {\n          className: \"fa fa-heart\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 494,\n          columnNumber: 22\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 490,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"section\", {\n        className: \"videos-wrapper\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"videos-container\",\n          ref: favVidRef,\n          children: favList()\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 498,\n          columnNumber: 15\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 496,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 486,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      id: \"work-on-it-modal\",\n      ref: workOnItRef,\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"dummy-margin-top\",\n        style: {\n          height: '15px'\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 507,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        onClick: e => resizeModal('workOnIt'),\n        className: \"modal-icons\",\n        children: [modalsPosition.workOnIt > 10 ? /*#__PURE__*/_jsxDEV(\"i\", {\n          className: \"fa fa-arrow-left\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 509,\n          columnNumber: 43\n        }, this) : modalsPosition.another > 10 ? /*#__PURE__*/_jsxDEV(\"i\", {\n          className: \"fa fa-arrow-right\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 510,\n          columnNumber: 41\n        }, this) : /*#__PURE__*/_jsxDEV(\"span\", {\n          style: {\n            marginRight: '1%'\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 510,\n          columnNumber: 81\n        }, this), '    ', /*#__PURE__*/_jsxDEV(\"i\", {\n          className: \"fas fa-business-time\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 511,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 508,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"section\", {\n        className: \"videos-wrapper\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"videos-container\",\n          ref: workVidRef,\n          children: workOnItList()\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 515,\n          columnNumber: 15\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 513,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 506,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      id: \"another-modal\",\n      ref: anotherRef,\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"dummy-margin-top\",\n        style: {\n          height: '15px'\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 524,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        onClick: e => resizeModal('another'),\n        className: \"modal-icons\",\n        children: [modalsPosition.another > 10 ? /*#__PURE__*/_jsxDEV(\"i\", {\n          className: \"fa fa-arrow-left\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 526,\n          columnNumber: 42\n        }, this) : /*#__PURE__*/_jsxDEV(\"i\", {\n          className: \"fa fa-arrow-right\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 526,\n          columnNumber: 81\n        }, this), '    ', /*#__PURE__*/_jsxDEV(\"i\", {\n          className: \"fa fa-play-circle-o\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 527,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 525,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"section\", {\n        className: \"videos-wrapper\",\n        style: {\n          opacity: '0'\n        },\n        ref: anotherVidRef,\n        children: \"bla bla bla\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 528,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 523,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 427,\n    columnNumber: 5\n  }, this);\n};\n\n_s(Learn, \"rUzmhCtkDVdQVSKxMbmGBm4Vauc=\");\n\n_c = Learn;\nexport default Learn;\n\nvar _c;\n\n$RefreshReg$(_c, \"Learn\");","map":{"version":3,"names":["TopUsers","uploadingVid","notFound","updateUserData","useState","useRef","useEffect","useContext","MyContext","fetchMyVideos","Learn","setLandingModal","justEarnedPoints","setJustEarnedPoints","setPointsPopup","payload","userDataID","dataID","initialPositions","favorites","workOnIt","another","expandedPositions","userData","setUserData","points","modalsPosition","setModalsPosition","videoData","setVideoData","title","data","videoID","chosenVideosData","setChosenVideosData","selectSearch","setSelectSearch","submitted","setSubmitted","isLiked","setIsLiked","toWorkOnIt","setToWorkOnIt","topUsersIsOpen","setTopUsersIsOpen","favoritesRef","workOnItRef","anotherRef","heartRef","workOnVideoRef","favVidRef","workVidRef","anotherVidRef","levelBarRef","topRef","levelName","current","includes","style","color","favList","map","vidData","i","addPoints","toUpperCase","e","removeVid","_id","filter","id","cursor","workOnItList","getLevel","n","a","b","c","result","Math","floor","property","removeID","workOnVideo","push","classList","add","setTimeout","remove","likeVideo","top","transform","opacity","resetHeart","clearTimeout","onChangeHandler","target","value","fetch","method","headers","body","JSON","stringify","input","then","res","json","catch","console","log","submitHandler","preventDefault","tagName","firstChild","previousSibling","parentElement","video","left","height","fetchOptions","token","localStorage","getItem","token_error","data_error","err","message","level","neededForNextLevelPoints","colectedLevelPoints","barPercent","backgroundImage","resizeModal","modal_name","prev","resizeTopUsersModal","width","length","position","marginRight"],"sources":["/home/user/Desktop/final-project-w2m/Wave2Me-DCI-FinalProject/client/src/components/Learn/Learn.jsx"],"sourcesContent":["import TopUsers from './TopUsers.jsx';\nimport './Learn.css';\nimport uploadingVid from '../../assets/uploading_bar.mp4';\nimport notFound from '../../assets/404pagenotfound.mp4';\nimport updateUserData from '../../helpers/updateUserData';\nimport { useState, useRef, useEffect, useContext } from 'react';\nimport MyContext from '../../context/MyContext.js';\nimport fetchMyVideos from '../../helpers/fetchMyVideos';\n\n\nconst Learn = () => {\n\n  const {setLandingModal,justEarnedPoints ,setJustEarnedPoints, setPointsPopup, payload} = useContext(MyContext);\n  const userDataID = payload.dataID;\n  const initialPositions = {favorites: 90, workOnIt: 93.3, another: 96.6};\n  const expandedPositions = {favorites: 0, workOnIt: 3, another: 6};\n \n  const [userData, setUserData] = useState({favorites: [], workOnIt: [], points: 0, dataID: null});\n  const [modalsPosition, setModalsPosition] = useState(initialPositions);\n  const [videoData, setVideoData] = useState({title: 'Loading...', data: uploadingVid, videoID: null});  \n  const [chosenVideosData, setChosenVideosData] = useState({favorites:[], workOnIt: []});\n  const [selectSearch, setSelectSearch] = useState('');  \n  const [submitted, setSubmitted] = useState(false);\n  const [isLiked, setIsLiked] = useState(false);  \n  const [toWorkOnIt, setToWorkOnIt] = useState(false);\n  const [topUsersIsOpen, setTopUsersIsOpen] = useState(false);\n\n  const favoritesRef = useRef();\n  const workOnItRef = useRef();\n  const anotherRef = useRef();\n  const heartRef = useRef();\n  const workOnVideoRef = useRef();\n  const favVidRef = useRef();\n  const workVidRef = useRef();\n  const anotherVidRef = useRef();\n  const levelBarRef = useRef();\n  const topRef = useRef();\n\n  const levelName = ['NOVICE','BEGINNER','PROGRESSING BEGINNER','ENTERING INTERMEDIATE','INTERMEDIATE','ADVANCED','EXPERT','MASTER'];\n\n  useEffect(()=>{\n    if(heartRef.current && userData.favorites.includes(videoData.videoID)) {\n      heartRef.current.style.color='#7f6ea6';\n      heartRef.current.title=\"Remove like?\";}\n    else if(heartRef.current) {\n      heartRef.current.style.color='white';\n      heartRef.current.title=\"Add to favorites\";\n    }\n  },[userData.favorites,videoData.videoID]);\n  \n  useEffect(()=>{\n    if(workOnVideoRef.current && userData.workOnIt.includes(videoData.videoID)) {\n      workOnVideoRef.current.style.color='#9168a1';\n      workOnVideoRef.current.title=\"Remove icon?\";}\n    else if(workOnVideoRef.current) {\n      workOnVideoRef.current.style.color='white';\n      workOnVideoRef.current.title=\"Work on it later\"}\n  },[userData.workOnIt,videoData.videoID]);\n\n\n  const favList = () => {\n\n    return    chosenVideosData.favorites.map((vidData,i)=>\n                            <div key={'fav_'+i}>\n\n                              <div className=\"img-container\">\n                                        <video \n                                              src={vidData.data} \n                                              type=\"video/mp4\"\n                                              onPlay={()=>addPoints(2)} \n                                              onPause={()=>addPoints(2)}\n                                              controls \n                                              loop>\n                                  Your browser does not support the video tag.</video> \n                              </div>\n                              \n                              <div className=\"text\">\n                                <h5 className='fav-title'> \n                                  {vidData.title.toUpperCase()}\n                                </h5>\n                              </div>\n\n                              <div className=\"fav-delete\">\n                                <i className=\"fa fa-trash-o\" \n                                  title='Remove this video from favorites' \n                                  onClick={(e)=>{setIsLiked(!isLiked);\n                                    removeVid('favorites',vidData._id);\n                                    fetchMyVideos(setChosenVideosData,{...userData,favorites:userData.favorites.filter(id=>id!==vidData._id)},chosenVideosData,'favorites');\n                                                  }}\n                                  style={{cursor:'pointer', color: '#404756'}}></i>\n                                <i className=\"fa fa-arrow-up\" \n                                  title='Remove this video from favorites' \n                                  onClick={(e)=>{setIsLiked(!isLiked);\n                                    removeVid('favorites',vidData._id);\n                                    fetchMyVideos(setChosenVideosData,{...userData,favorites:userData.favorites.filter(id=>id!==vidData._id)},chosenVideosData,'favorites');\n                                                  }}\n                                  style={{cursor:'pointer', \tcolor: '#404756'}}></i>\n                              </div> \n\n                            </div>) ;\n  }\n\n  const workOnItList = () => {\n\n    return    chosenVideosData.workOnIt.map((vidData,i)=>\n                            <div key={'work_'+i}>\n\n                              <div className=\"img-container\">\n                                        <video \n                                              src={vidData.data} \n                                              type=\"video/mp4\"\n                                              onPlay={()=>addPoints(2)} \n                                              onPause={()=>addPoints(2)}\n                                              controls \n                                              loop>\n                                  Your browser does not support the video tag.</video> \n                              </div>\n                              \n                              <div className=\"text\">\n                                <h5 className='fav-title'> \n                                  {vidData.title.toUpperCase()}\n                                </h5>\n                              </div>\n\n                              <div className=\"fav-delete\">\n                                <i className=\"fa fa-trash-o\" \n                                  title='Remove this video from workOnIt' \n                                  onClick={(e)=>{\n                                    removeVid('workOnIt',vidData._id);\n                                    fetchMyVideos(setChosenVideosData,{...userData,workOnIt:userData.workOnIt.filter(id=>id!==vidData._id)},chosenVideosData,'workOnIt');\n                                                  }}\n                                  style={{cursor:'pointer', color: '#404756'}}></i>\n                                <i className=\"fa fa-arrow-up\" \n                                  title='Remove this video from workOnIt' \n                                  onClick={(e)=>{\n                                    removeVid('workOnIt',vidData._id);\n                                    fetchMyVideos(setChosenVideosData,{...userData,workOnIt:userData.workOnIt.filter(id=>id!==vidData._id)},chosenVideosData,'workOnIt');\n                                                  }}\n                                  style={{cursor:'pointer', \tcolor: '#404756'}}></i>\n                              </div> \n\n                            </div>) ;\n  }\n\n  const getLevel = n => { //based on Fibonacci sequence\n\n    if (n <= 3) {\n      return 0;\n    }\n     \n    let a = 0, b = 1, c = 1, result = -4;\n    \n    while (c < n) {\n      c = a + b;\n      a = b;\n      b = c;\n      result++;\n    }\n    \n    return {result, levelName: Math.floor(result/5)};\n  };\n\n  const addPoints = (points) => {\n\n    updateUserData({...userData, points: userData.points+points});\n    setUserData({...userData, points: userData.points+points});\n    setJustEarnedPoints(justEarnedPoints+points);\n  }\n  \n  const removeVid = (property,videoID) => {\n        userData.points+=2;\n        const removeID = userData[property].filter(id=>id!==videoID);\n        updateUserData({...userData,[property]:removeID},property);\n        setUserData({...userData, [property]: removeID});\n  }\n  \n  const workOnVideo = () =>{\n    const property = 'workOnIt';\n    if(userData.dataID && videoData.videoID){\n      if(!toWorkOnIt){\n        userData.workOnIt.push(videoData.videoID);\n        userData.points+=2;\n        setJustEarnedPoints(justEarnedPoints+2)\n        updateUserData(userData,property);\n        setUserData({...userData,[property]:[...userData[property]]});\n      } else {\n        removeVid(property,videoData.videoID);\n      }\n      \n      setToWorkOnIt(!toWorkOnIt)\n      workOnVideoRef.current.classList.add(\"shake\");\n      setTimeout(()=>{ workOnVideoRef?.current && workOnVideoRef.current.classList.remove(\"shake\");},1000);\n    }\n  }\n\n  const likeVideo = () =>{\n    const property = 'favorites';\n\n    if(userData.dataID && videoData.videoID){\n      if(!isLiked){\n        userData.favorites.push(videoData.videoID);\n        userData.points+=3;\n        setJustEarnedPoints(justEarnedPoints+3)\n        updateUserData(userData,property);\n        setUserData({...userData,[property]:[...userData[property]]});\n      } else {\n        removeVid(property,videoData.videoID);\n      }\n      heartRef.current.style.top='-4500%';\n      heartRef.current.style.transform=\"rotate(1080deg)\";\n      heartRef.current.style.opacity='1';\n      setIsLiked(!isLiked);\n    }\n  }\n\n  useEffect(()=> {\n\n    let resetHeart;\n    if(heartRef.current){\n    resetHeart = setTimeout(() => {\n      heartRef.current.style.top='0';\n      heartRef.current.style.transform=\"initial\";\n    }, 1000);}\n\n    return ()=>{resetHeart && clearTimeout(resetHeart)};\n\n  },[isLiked]);\n\n  const onChangeHandler = (e) => {\n\t  \n\t  if(e.target.value) {\n\t  \n\t\t  fetch('http://localhost:5000/searchVideos', {\n\t\t\t  method: 'POST',\n\t\t\t  headers: {'Content-Type':'application/json'},\n\t\t\t  body: JSON.stringify({ input: e.target.value })\n\t\t  })\n\t\t  .then(res=>res.json())\n\t\t  .then(data=>setSelectSearch(data))\n\t\t  .catch(console.log);\n\t  \n\t  }\n\t  \n  }\n  \n  const submitHandler = (e) => {\n\te.preventDefault();\n  let input = '';\n\t\n\tswitch(e.target.tagName) {\n\t\t\n\t\tcase 'FORM': input = e.target.firstChild.firstChild.value;\n\t\t             input && setVideoData({title: 'Loading...', data: uploadingVid});\n\t  break;\n\t\t\n\t\tcase 'SELECT': e.target.previousSibling.firstChild.value = e.target.value;\n\t\treturn;\n\t\t\n\t\tcase 'I': input = e.target.parentElement.previousSibling.value;\n\t\t          input && setVideoData({title: 'Loading...', data: uploadingVid});\n\t  break;\n\t\t\n\t\tdefault: return;\n\t}\n\t\n\tfetch('http://localhost:5000/searchVideo', {\n\t\t\t  method: 'POST',\n\t\t\t  headers: {'Content-Type':'application/json'},\n\t\t\t  body: JSON.stringify({ input })\n\t\t  })\n\t\t  .then(res=>res.json())\n  .then(video=>{\n\t\t\t\tif(video){\n        setVideoData({title:video.title,data:video.data, videoID: video._id});\n        setIsLiked(userData.favorites.includes(video._id));\n        setToWorkOnIt(userData.workOnIt.includes(video._id));\n\t\t\t\tsetSubmitted(true);\n          } else {setVideoData({title:'Video not found.',data:notFound, videoID: null});}\n\t\t\t\t})\n\t\t  .catch(console.log);\n\t\n  }\n\n  useEffect(()=>{\n    favoritesRef.current.style.left = modalsPosition.favorites+'%';\n    workOnItRef.current.style.left = modalsPosition.workOnIt+'%';\n    anotherRef.current.style.left = modalsPosition.another+'%';\n\n    if(modalsPosition.favorites >= 90) {\n      favoritesRef.current.style.height = '0';\n      } else {\n        favoritesRef.current.style.height = '100vh';\n      }\n    \n    if(modalsPosition.workOnIt >= 90) {\n      workOnItRef.current.style.height = '0';\n      } else {\n        workOnItRef.current.style.height = '100vh';\n      }\n\n    if(modalsPosition.another >= 90) {\n      anotherRef.current.style.height = '0';\n      } else {\n        anotherRef.current.style.height = '100vh';\n      }\n\n  },[modalsPosition]);\n\n  useEffect(()=>{\n\n    const fetchOptions = {\n        method: 'POST',\n        headers: {\n            'Content-Type':'application/json',\n            token: localStorage.getItem('W2M-JWT-Token')\n        },\n        body: JSON.stringify({dataID: userDataID})\n    }\n\n    fetch('http://localhost:5000/get-user-data', fetchOptions)\n    .then(res=>res.json())\n    .then(data=>{ \n                data.token_error || !localStorage.getItem('W2M-JWT-Token') ? \n                setLandingModal(true) :\n                data.data_error ? console.log(data) : setUserData(data)})\n    .catch(err=>console.log('fetch error',err.message));\n\n\t  \n\tfetch('http://localhost:5000/video-of-the-day')\n\t.then(res=>res.json())\n\t.then(video=>{\n\t\t\tsetVideoData({title: video.title, data: video.data, videoID: video._id});\n\t\t})\n\t\t.catch(console.log);\n\n\n    setJustEarnedPoints(0);\n    setPointsPopup(false);\n\n\t  return ()=> setPointsPopup(true);\n\n  },[]);\n\n\n  useEffect(()=>{\n\n    const level = getLevel(userData.points).result;\n\n    //fibonacci based\n\n    let a = 0, b = 1, c = level+5;\n  \n    for(let i = 2; i <= level+5; i++) {\n      c = a + b;\n      a = b;\n      b = c;\n    }\n\n    const neededForNextLevelPoints = c-a; \n    const colectedLevelPoints = userData.points - a;\n    const barPercent = (colectedLevelPoints/neededForNextLevelPoints)*100;\n\n    if(levelBarRef.current) \n    levelBarRef.current.style.backgroundImage=`linear-gradient(90deg, #33336C ${barPercent-3}%, #e2f1ff ${barPercent+3}%)`;\n\n  },[userData.points]);\n\n\n  const resizeModal = (modal_name) => {\n\n    addPoints(2);\n\n    if( modal_name==='favorites' && modalsPosition[modal_name]>10 ) {\n      favVidRef.current.style.opacity=1; workVidRef.current.style.opacity=0; anotherVidRef.current.style.opacity=0;}\n    if( modal_name==='workOnIt' && modalsPosition[modal_name]>10 ) {\n      favVidRef.current.style.opacity=.4; workVidRef.current.style.opacity=1; anotherVidRef.current.style.opacity=0;}\n    if( modal_name==='favorites' && modalsPosition[modal_name]<10 && modalsPosition.workOnIt > 10) {\n      favVidRef.current.style.opacity=0; workVidRef.current.style.opacity=0; anotherVidRef.current.style.opacity=0;}\n    if( modal_name==='favorites' && modalsPosition[modal_name]<10 && modalsPosition.workOnIt < 10) {\n        favVidRef.current.style.opacity=1; workVidRef.current.style.opacity=0; anotherVidRef.current.style.opacity=0;}\n    if( modal_name==='workOnIt' && modalsPosition[modal_name]<10 ) {\n      favVidRef.current.style.opacity=1; workVidRef.current.style.opacity=1; anotherVidRef.current.style.opacity=0;}\n    if( modal_name==='another' && modalsPosition[modal_name]<10 ) {\n      favVidRef.current.style.opacity=.4; workVidRef.current.style.opacity=1; anotherVidRef.current.style.opacity=0;}\n    if( modal_name==='another' && modalsPosition[modal_name]>10 ) {\n      favVidRef.current.style.opacity=.4; workVidRef.current.style.opacity=.4; anotherVidRef.current.style.opacity=1;}\n    if(modal_name==='search'){\n      favVidRef.current.style.opacity=0; workVidRef.current.style.opacity=0; anotherVidRef.current.style.opacity=0;\n    }\n    \n    modal_name!=='another' && modal_name!=='search'&& (modalsPosition[modal_name]>10 || modalsPosition.workOnIt<10) && \n    fetchMyVideos(setChosenVideosData,userData,chosenVideosData,modal_name);\n\n    switch(modal_name){\n\n      case 'favorites': modalsPosition.workOnIt > 10 ?\n                        setModalsPosition(prev => prev = modalsPosition[modal_name] < 10? initialPositions : {...initialPositions, [modal_name]:expandedPositions.favorites}) :\n                        setModalsPosition({...initialPositions, [modal_name]:expandedPositions.favorites});\n      break;\n\n      case 'workOnIt': modalsPosition.another > 10 ? \n                       setModalsPosition(prev => prev = modalsPosition[modal_name] < 10? {...initialPositions, 'favorites': expandedPositions.favorites} : {...expandedPositions, 'another':initialPositions.another}) :\n                       setModalsPosition({...expandedPositions, 'another':initialPositions.another});\n      break;\n\n      case 'another': setModalsPosition(prev => prev = modalsPosition[modal_name] < 10? {...expandedPositions, [modal_name]:initialPositions.another} : expandedPositions);\n      break;\n\n      case 'search': setModalsPosition(initialPositions);\n      break;\n      default: return;\n    }\n  }\n\n  const resizeTopUsersModal = () => {\n    if(topRef.current) {\n        topRef.current.style.height = '80vh';\n        topRef.current.style.width = '80vw';\n        topRef.current.style.opacity = '1';\n        setTopUsersIsOpen(!topUsersIsOpen);\n    } \n}\n\n  if(!localStorage.getItem('W2M-JWT-Token')) setLandingModal(true);\n\n  return (\n    <div id=\"learn-container\">\n\n        <div id=\"first-page\">\n            <form id=\"search-container\" onSubmit={submitHandler}>\n              <div id='search-div'>\n                <input\n                onChange={onChangeHandler} \n                type='text'\n                name='search' \n                placeholder='Search sign videos here'\n                autoFocus={true} /> \n                <span id='search-btn'>\n                <i  id='search-vid-icon'\n                  className=\"fas fa-search\" \n                  onClick={submitHandler}>\n                </i>\n                </span>\n              </div>\n              {selectSearch.length>0 && <select style={{color:'black'}}  onChange={submitHandler}>\n                  <option value=''></option>\n                  {selectSearch.map((video,i)=><option key={i} style={{color:'black'}} value={video.title}>{video.title}</option>)}\n              </select>}\n            </form>\n\t\t\t\n            <div className=\"text\">\n              <h5> \n                {submitted || videoData.title==='Video not found.' ? videoData.title.toUpperCase() : 'Video of the day: '+videoData.title.toUpperCase()}\n              </h5>\n            </div>\n                  \n            <div className=\"img-container\">\n                      <video \n                            src={videoData.data} \n                            type=\"video/mp4\"\n                            onPlay={()=>addPoints(2)} \n                            onPause={()=>addPoints(2)}\n                            controls={videoData.title==='Loading...' || videoData.title==='Video not found.'?false:true}\n                            autoPlay \n                            loop>\n                Your browser does not support the video tag.</video> \n            </div>\n            \n            {videoData.videoID &&\n            <div id=\"video-likes\">\n              <i className=\"fa fa-heart\" style={{position:'relative'}}>\n                <i className=\"fa fa-heart video-icon\" ref={heartRef} onClick={likeVideo}></i>\n              </i>\n              <i className='fas fa-business-time' style={{position:'relative'}}>\n                <i className='fas fa-business-time video-icon' ref={workOnVideoRef} onClick={workOnVideo}></i>\n              </i>\n            </div>}\n            <div id='level-container' title='Click to see Top Users' onClick={resizeTopUsersModal}>\n                <div id='level-indicator'>Level: {getLevel(userData.points).result} {levelName[getLevel(userData.points).levelName]}</div>\n                <div id='level-bar' ref={levelBarRef}></div>\n            </div>\n          \n            <TopUsers topRef={topRef} topUsersIsOpen={topUsersIsOpen}/>\n\n        </div>\n        <div id=\"favorites-modal\" ref={favoritesRef}>\n          <div className=\"dummy-margin-top\" style={{height: '15px', cursor: 'pointer'}} onClick={(e)=>resizeModal('search')}>\n\t\t        {modalsPosition.workOnIt<90 && <><i className=\"fas fa-search\"></i><i className=\"fa fa-arrow-right\"></i></>}\n          </div>\n          <div className='modal-icons' onClick={(e)=>resizeModal('favorites')}>\n            {modalsPosition.favorites>10 ? \n            <i className=\"fa fa-arrow-left\"></i> : \n            modalsPosition.workOnIt>10 ? <i className=\"fa fa-arrow-right\"></i> : <span style={{marginRight: '1%'}}></span> }\n            {'    '} <i className=\"fa fa-heart\"></i>\n          </div>\n          <section className='videos-wrapper'>\n\n              <div className='videos-container' ref={favVidRef}>\n\n                {favList()}             \n\n              </div>\n\n          </section>\n        </div>\n        <div id=\"work-on-it-modal\" ref={workOnItRef}>\n          <div className=\"dummy-margin-top\" style={{height: '15px'}}></div>\n          <div onClick={(e)=>resizeModal('workOnIt')} className='modal-icons'>\n            {modalsPosition.workOnIt>10 ? <i className=\"fa fa-arrow-left\"></i> : \n            modalsPosition.another>10 ? <i className=\"fa fa-arrow-right\"></i> : < span style={{marginRight: '1%'}}></span>}\n            {'    '}<i className='fas fa-business-time'></i>\n          </div>\n          <section className='videos-wrapper'>\n\n              <div className='videos-container' ref={workVidRef}>\n\n                {workOnItList()}              \n\n              </div>\n\n          </section>\n        </div>\n        <div id=\"another-modal\" ref={anotherRef}>\n          <div className=\"dummy-margin-top\" style={{height: '15px'}}></div>\n          <div onClick={(e)=>resizeModal('another')} className='modal-icons'>\n            {modalsPosition.another>10 ? <i className=\"fa fa-arrow-left\"></i> : <i className=\"fa fa-arrow-right\"></i>}\n            {'    '}<i className=\"fa fa-play-circle-o\"></i></div>\n          <section className='videos-wrapper' style={{opacity: '0'}} ref={anotherVidRef}>\n\n              bla bla bla\n\n          </section>\n        </div>\n    </div>\n     )\n}\n\nexport default Learn;"],"mappings":"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"},"metadata":{},"sourceType":"module"}